import{c as K,r as o,J as p,t as i,j as e,K as Q,A as X,k as q,l as Z,C as j,b as f,d as y,L as T,f as N,h as v,N as g,O as u,P as ee,m as c,Q as G,V as U,W as se,U as M,X as R,Y as ae}from"./index-YwTAT7JH.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],le=K("circle-check",re);function ie({organization:t,accessToken:x,onSettingsUpdated:$}){const[l,d]=o.useState({logo:t.logo||"",primaryColor:t.primaryColor||"#ea580c",signatories:[]}),[F,C]=o.useState(t.name||""),[J,B]=o.useState(!0),[E,P]=o.useState(!1),[z,L]=o.useState(!1),[A,O]=o.useState(null),[w,n]=o.useState(!1);o.useEffect(()=>{I()},[t.id]),o.useEffect(()=>{C(t.name||"")},[t.name]);const I=async()=>{try{B(!0);const s=await p.getSettings(x,t.id);d(s.settings),C(t.name||""),n(!1)}catch(s){console.error("Error loading settings:",s),i.error("Failed to load organization settings")}finally{B(!1)}},W=async s=>{const a=s.target.files?.[0];if(a){if(!a.type.startsWith("image/")){i.error("Please upload an image file");return}if(a.size>5*1024*1024){i.error("File size must be less than 5MB");return}try{L(!0);const r=await p.uploadFile(x,a,"logo",t.id);d(m=>({...m,logo:r.url})),n(!0),i.success("Logo uploaded successfully")}catch(r){console.error("Error uploading logo:",r),i.error("Failed to upload logo")}finally{L(!1)}}},Y=async(s,a)=>{const r=a.target.files?.[0];if(r){if(!r.type.startsWith("image/")){i.error("Please upload an image file");return}if(r.size>2*1024*1024){i.error("File size must be less than 2MB");return}try{O(s);const m=await p.uploadFile(x,r,"signature",t.id);d(h=>({...h,signatories:h.signatories.map(k=>k.id===s?{...k,signatureUrl:m.url}:k)})),n(!0),i.success("Signature uploaded successfully")}catch(m){console.error("Error uploading signature:",m),i.error("Failed to upload signature")}finally{O(null)}}},D=()=>{const s={id:`sig-${Date.now()}`,name:"",title:"",signatureUrl:""};d(a=>({...a,signatories:[...a.signatories,s]})),n(!0)},H=s=>{d(a=>({...a,signatories:a.signatories.filter(r=>r.id!==s)})),n(!0)},b=(s,a,r)=>{d(m=>({...m,signatories:m.signatories.map(h=>h.id===s?{...h,[a]:r}:h)})),n(!0)},S=s=>{d(a=>({...a,primaryColor:s})),n(!0)},V=async()=>{try{P(!0);const s=await p.updateSettings(x,t.id,l);$(t.id,{name:F,logo:l.logo,primaryColor:l.primaryColor,settings:s.settings}),n(!1),i.success("Settings saved successfully!")}catch(s){console.error("Error saving settings:",s),i.error("Failed to save settings")}finally{P(!1)}},_=[{name:"Orange",value:"#ea580c"},{name:"Blue",value:"#3b82f6"},{name:"Teal",value:"#14b8a6"},{name:"Emerald",value:"#10b981"},{name:"Black",value:"#171717"},{name:"Amber",value:"#f59e0b"},{name:"Red",value:"#ef4444"},{name:"Pink",value:"#ec4899"}];return J?e.jsx(Q,{}):e.jsxs("div",{className:"space-y-6 max-w-4xl",children:[w&&e.jsxs(X,{children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx(Z,{children:"You have unsaved changes. Don't forget to save your settings."})]}),e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"}),"Organization Information"]}),e.jsx(N,{children:"Basic information about your organization that will appear on certificates."})]}),e.jsx(v,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"org-name",children:"Organization Name"}),e.jsx(u,{id:"org-name",type:"text",value:F,onChange:s=>{C(s.target.value),n(!0)},placeholder:"Enter your organization name",className:"max-w-md"}),e.jsx("p",{className:"text-xs text-gray-500",children:"This will be displayed on all certificates issued by your organization"})]})})]}),e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"}),"Organization Logo"]}),e.jsx(N,{children:"Upload your organization's logo. This will appear on all certificates."})]}),e.jsx(v,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-32 h-32 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden border-2 border-gray-200",children:l.logo?e.jsx("img",{src:l.logo,alt:"Organization logo",className:"w-full h-full object-contain p-2"}):e.jsx(ee,{className:"w-12 h-12 text-gray-400"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(g,{htmlFor:"logo-upload",children:"Upload Logo"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",disabled:z,onClick:()=>document.getElementById("logo-upload")?.click(),children:z?e.jsxs(e.Fragment,{children:[e.jsx(Skeleton,{className:"h-4 w-4 mr-2 rounded-full inline-block"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Choose File"]})}),l.logo&&e.jsxs(c,{variant:"ghost",onClick:()=>{d(s=>({...s,logo:""})),n(!0)},children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Remove"]})]}),e.jsx("input",{id:"logo-upload",type:"file",accept:"image/*",className:"hidden",onChange:W}),e.jsx("p",{className:"text-xs text-gray-500",children:"Recommended: PNG or SVG, max 5MB"})]})]})})]}),e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Brand Color"]}),e.jsx(N,{children:"Choose a primary color for your certificates. This will be used for borders, accents, and text highlights."})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Select Color"}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:_.map(s=>e.jsxs("button",{onClick:()=>S(s.value),className:`
                    relative h-16 rounded-lg border-2 transition-all hover:scale-105
                    ${l.primaryColor===s.value?"border-gray-900 ring-2 ring-gray-400":"border-gray-200"}
                  `,style:{backgroundColor:s.value},children:[l.primaryColor===s.value&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(le,{className:"w-6 h-6 text-white drop-shadow-lg"})}),e.jsx("span",{className:"absolute bottom-1 left-0 right-0 text-center text-xs text-white font-medium drop-shadow",children:s.name})]},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"custom-color",children:"Custom Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{id:"custom-color",type:"color",value:l.primaryColor,onChange:s=>S(s.target.value),className:"w-20 h-10 cursor-pointer"}),e.jsx(u,{type:"text",value:l.primaryColor,onChange:s=>S(s.target.value),placeholder:"#ea580c",className:"flex-1"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Or enter a custom hex color code"})]}),e.jsx("div",{className:"p-4 rounded-lg border-2",style:{borderColor:l.primaryColor},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full",style:{backgroundColor:l.primaryColor}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",style:{color:l.primaryColor},children:"Certificate Preview"}),e.jsx("p",{className:"text-xs text-gray-500",children:"This is how your brand color will appear"})]})]})})]})]}),e.jsxs(j,{children:[e.jsxs(f,{children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5"}),"Certificate Signatories"]}),e.jsx(N,{children:"Add authorized signatories who will appear on certificates. You can upload their signature images."})]}),e.jsx(v,{className:"space-y-4",children:l.signatories.length===0?e.jsxs("div",{className:"text-center py-8 border-2 border-dashed rounded-lg",children:[e.jsx(M,{className:"w-12 h-12 mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No signatories added yet"}),e.jsxs(c,{onClick:D,variant:"outline",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Add Signatory"]})]}):e.jsxs(e.Fragment,{children:[l.signatories.map((s,a)=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-medium",children:["Signatory ",a+1]}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>H(s.id),children:e.jsx(U,{className:"w-4 h-4 text-red-600"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Full Name"}),e.jsx(u,{value:s.name,onChange:r=>b(s.id,"name",r.target.value),placeholder:"Dr. Jane Smith"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Title / Position"}),e.jsx(u,{value:s.title,onChange:r=>b(s.id,"title",r.target.value),placeholder:"Program Director"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Signature Image (Optional)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[s.signatureUrl&&e.jsx("div",{className:"w-32 h-16 bg-gray-50 rounded border flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:s.signatureUrl,alt:"Signature",className:"max-w-full max-h-full object-contain"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",disabled:A===s.id,onClick:()=>document.getElementById(`signature-${s.id}`)?.click(),children:A===s.id?e.jsxs(e.Fragment,{children:[e.jsx(Skeleton,{className:"h-4 w-4 mr-2 rounded-full inline-block"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),s.signatureUrl?"Change":"Upload"]})}),s.signatureUrl&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>b(s.id,"signatureUrl",""),children:e.jsx(U,{className:"w-4 h-4"})})]}),e.jsx("input",{id:`signature-${s.id}`,type:"file",accept:"image/*",className:"hidden",onChange:r=>Y(s.id,r)})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG or JPG, transparent background recommended, max 2MB"})]})]},s.id)),e.jsxs(c,{onClick:D,variant:"outline",className:"w-full",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Add Another Signatory"]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 sticky bottom-0 bg-gradient-to-t from-white via-white to-transparent pt-6 pb-4",children:[w&&e.jsx(c,{variant:"outline",onClick:I,children:"Discard Changes"}),e.jsx(c,{onClick:V,disabled:E||!w,children:E?e.jsxs(e.Fragment,{children:[e.jsx(Skeleton,{className:"h-4 w-4 mr-2 rounded-full inline-block"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})]})}export{ie as default};
