import{c as v,r,w as b,t as C,j as e,x as S,C as t,h as a,M as j,y as u,u as T,b as A,d as F,g as m,U as k,v as B}from"./index-YwTAT7JH.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],L=v("funnel",D),E=({organizationId:o,accessToken:c})=>{const[l,g]=r.useState([]),[d,p]=r.useState({}),[f,x]=r.useState(!0),[i,h]=r.useState("all");r.useEffect(()=>{N()},[o,c]);const N=async()=>{if(!c){x(!1);return}try{x(!0);const s=await b.getForOrganization(c,o);g(s.testimonials||[]),p(s.testimonialsByCourse||{})}catch(s){console.error("Failed to load testimonials:",s),C.error("Failed to load testimonials")}finally{x(!1)}},y=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),n=Object.keys(d),w=i==="all"?l:d[i]||[];return f?e.jsx(S,{}):l.length===0?e.jsx(t,{children:e.jsxs(a,{className:"flex flex-col items-center justify-center p-12",children:[e.jsx(j,{className:"w-16 h-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Testimonials Yet"}),e.jsx("p",{className:"text-gray-600 text-center max-w-md",children:"When students submit their feedback along with their certificates, their testimonials will appear here."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(t,{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Testimonials"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:l.length})]}),e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(j,{className:"w-6 h-6 text-primary"})})]})})}),e.jsx(t,{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Courses with Feedback"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:n.length})]}),e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(u,{className:"w-6 h-6 text-primary"})})]})})}),e.jsx(t,{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg per Course"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:n.length>0?(l.length/n.length).toFixed(1):"0"})]}),e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(T,{className:"w-6 h-6 text-primary"})})]})})})]}),e.jsxs(t,{children:[e.jsx(A,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),"Filter by Course"]})})}),e.jsx(a,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(m,{variant:i==="all"?"default":"outline",className:"cursor-pointer px-4 py-2",onClick:()=>h("all"),children:["All Courses (",l.length,")"]}),n.map(s=>e.jsxs(m,{variant:i===s?"default":"outline",className:"cursor-pointer px-4 py-2",onClick:()=>h(s),children:[s," (",d[s].length,")"]},s))]})})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:w.map(s=>e.jsx(t,{className:"hover:shadow-md transition-shadow",children:e.jsxs(a,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(k,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.studentName}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[e.jsx(u,{className:"w-3 h-3"}),s.courseName]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(B,{className:"w-4 h-4"}),y(s.submittedAt)]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-primary",children:e.jsxs("p",{className:"text-gray-700 italic",children:['"',s.testimonial,'"']})}),e.jsx("div",{className:"mt-4 flex items-center gap-2",children:e.jsxs(m,{variant:"outline",className:"text-xs",children:["ID: ",s.certificateId]})})]})},s.id))})]})};export{E as default};
